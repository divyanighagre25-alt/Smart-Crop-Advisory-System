<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Crop Advisory ЁЯМ▒</title>
<style>
body { 
    font-family: Arial, sans-serif; 
    padding: 20px; 
    background: #f0f5f0; 
}
h2 { color: #2e7d32; }
input, select, button { padding: 8px; margin: 5px 0; width: 100%; }
#sensorData, #recommendations, #notifications { margin-top: 20px; }
.card { border: 1px solid #ccc; padding: 10px; border-radius: 5px; margin-bottom: 10px; background: #fff; }
#soilPreview img { max-width: 100%; max-height: 200px; border-radius: 5px; margin-top: 10px; }
</style>
</head>
<body>

<h2 id="title"></h2>

<label id="langLabel"></label>
<select id="language" onchange="updateLanguage()">
  <option value="en">English</option>
  <option value="hi">рд╣рд┐рдиреНрджреА</option>
  <option value="mr">рдорд░рд╛рдареА</option>
</select>

<h3 id="inputHeading"></h3>
<label id="cropLabel"></label>
<select id="cropType"></select>

<label id="sizeLabel"></label>
<input type="number" id="farmSize">

<label id="soilLabel"></label>
<select id="soilType"></select>

<label id="soilPhotoLabel"></label>
<input type="file" id="soilPhoto" accept="image/*" onchange="previewSoilPhoto()">
<div id="soilPreview" class="card" style="text-align:center;"></div>

<label id="locLabel"></label>
<input type="text" id="location" oninput="handleLocationInput()">

<button id="adviceBtn" onclick="generateRecommendations()"></button>

<h3 id="sensorHeading"></h3>
<div id="sensorData"></div>

<h3 id="recHeading"></h3>
<div id="recommendations"></div>
<button id="voiceBtn" onclick="speakAll()"></button>

<h3 id="notifHeading"></h3>
<div id="notifications"></div>

<h3 id="feedbackHeading"></h3>
<button id="feedbackBtn" onclick="collectFeedback()"></button>

<script>
// ---------------- TRANSLATIONS ----------------
const translations = {
  en: { title:"ЁЯМ╛ Smart Crop Advisory System", langLabel:"ЁЯМР Select Language:", inputHeading:"1я╕ПтГг Farmer Input",
        cropLabel:"Crop Type:", sizeLabel:"Farm Size (acres):", soilLabel:"Soil Type:", soilPhotoLabel:"Upload Soil Photo:",
        locLabel:"Location:", adviceBtn:"Get AI Recommendations ЁЯдЦ", sensorHeading:"2я╕ПтГг Simulated Sensor Data", recHeading:"3я╕ПтГг AI Recommendations",
        voiceBtn:"ЁЯФК Listen", notifHeading:"4я╕ПтГг Notifications & Delivery", feedbackHeading:"5я╕ПтГг Feedback", feedbackBtn:"Send Feedback",
        notif:["ЁЯУ▒ Mobile notification sent!", "ЁЯФК Voice guidance ready!", "ЁЯУи SMS/USSD sent for offline farmers!"],
        fillAlert:"Please fill all fields", selectCrop:"Select Crop", selectSoil:"Select Soil",
        farmPlaceholder:"Enter farm size", locPlaceholder:"Enter location", smsVoice:"Your crop advisory has been sent via SMS/USSD.",
        photoUpload:"Soil photo uploaded successfully.", enterLoc:"Enter location to see sensor data"},
  hi: { title:"ЁЯМ╛ рд╕реНрдорд╛рд░реНрдЯ рдлрд╕рд▓ рд╕рд▓рд╛рд╣ рдкреНрд░рдгрд╛рд▓реА", langLabel:"ЁЯМР рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ:", inputHeading:"1я╕ПтГг рдХрд┐рд╕рд╛рди рдЗрдирдкреБрдЯ",
        cropLabel:"рдлрд╕рд▓ рдХрд╛ рдкреНрд░рдХрд╛рд░:", sizeLabel:"рдЦреЗрдд рдХрд╛ рдЖрдХрд╛рд░ (рдПрдХрдбрд╝):", soilLabel:"рдорд┐рдЯреНрдЯреА рдХрд╛ рдкреНрд░рдХрд╛рд░:", soilPhotoLabel:"рдорд┐рдЯреНрдЯреА рдХрд╛ рдлреЛрдЯреЛ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ:",
        locLabel:"рд╕реНрдерд╛рди:", adviceBtn:"рдПрдЖрдИ рд╕рд▓рд╛рд╣ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ ЁЯдЦ", sensorHeading:"2я╕ПтГг рд╕реЗрдВрд╕рд░ рдбреЗрдЯрд╛ (рд╕рд┐рдореНрдпреБрд▓реЗрдЯреЗрдб)", recHeading:"3я╕ПтГг рдПрдЖрдИ рд╕рд▓рд╛рд╣",
        voiceBtn:"ЁЯФК рд╕реБрдиреЗрдВ", notifHeading:"4я╕ПтГг рд╕реВрдЪрдирд╛рдПрдБ рдФрд░ рд╡рд┐рддрд░рдг", feedbackHeading:"5я╕ПтГг рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛", feedbackBtn:"рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рднреЗрдЬреЗрдВ",
        notif:["ЁЯУ▒ рдореЛрдмрд╛рдЗрд▓ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рди рднреЗрдЬрд╛ рдЧрдпрд╛!", "ЁЯФК рд╡реЙрдпрд╕ рдЧрд╛рдЗрдбреЗрдВрд╕ рддреИрдпрд╛рд░!", "ЁЯУи рдПрд╕рдПрдордПрд╕/рдпреВрдПрд╕рдПрд╕рдбреА рднреЗрдЬрд╛ рдЧрдпрд╛!"],
        fillAlert:"рдХреГрдкрдпрд╛ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рднрд░реЗрдВ", selectCrop:"рдлрд╕рд▓ рдЪреБрдиреЗрдВ", selectSoil:"рдорд┐рдЯреНрдЯреА рдЪреБрдиреЗрдВ",
        farmPlaceholder:"рдЦреЗрдд рдХрд╛ рдЖрдХрд╛рд░ рджрд░реНрдЬ рдХрд░реЗрдВ", locPlaceholder:"рд╕реНрдерд╛рди рджрд░реНрдЬ рдХрд░реЗрдВ", smsVoice:"рдЖрдкрдХреА рдлрд╕рд▓ рд╕рд▓рд╛рд╣ SMS/USSD рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рднреЗрдЬреА рдЧрдИ рд╣реИред",
        photoUpload:"рдорд┐рдЯреНрдЯреА рдХрд╛ рдлреЛрдЯреЛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЕрдкрд▓реЛрдб рдХрд┐рдпрд╛ рдЧрдпрд╛ред", enterLoc:"рд╕реЗрдВрд╕рд░ рдбреЗрдЯрд╛ рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдерд╛рди рджрд░реНрдЬ рдХрд░реЗрдВ"},
  mr: { title:"ЁЯМ╛ рд╕реНрдорд╛рд░реНрдЯ рдкреАрдХ рд╕рд▓реНрд▓рд╛ рдкреНрд░рдгрд╛рд▓реА", langLabel:"ЁЯМР рднрд╛рд╖рд╛ рдирд┐рд╡рдбрд╛:", inputHeading:"1я╕ПтГг рд╢реЗрддрдХрд░реА рдорд╛рд╣рд┐рддреА",
        cropLabel:"рдкреАрдХ рдкреНрд░рдХрд╛рд░:", sizeLabel:"рд╢реЗрддрд╛рдЪрд╛ рдЖрдХрд╛рд░ (рдПрдХрд░):", soilLabel:"рдорд╛рддреАрдЪрд╛ рдкреНрд░рдХрд╛рд░:", soilPhotoLabel:"рдорд╛рддреАрдЪрд╛ рдлреЛрдЯреЛ рдЕрдкрд▓реЛрдб рдХрд░рд╛:",
        locLabel:"рдард┐рдХрд╛рдг:", adviceBtn:"рдПрдЖрдп рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛ ЁЯдЦ", sensorHeading:"2я╕ПтГг рд╕реЗрдиреНрд╕рд░ рдбреЗрдЯрд╛ (рд╕рд┐рдореНрдпреБрд▓реЗрдЯреЗрдб)", recHeading:"3я╕ПтГг рдПрдЖрдп рд╕рд▓реНрд▓рд╛",
        voiceBtn:"ЁЯФК рдРрдХрд╛", notifHeading:"4я╕ПтГг рд╕реВрдЪрдирд╛ рдЖрдгрд┐ рд╡рд┐рддрд░рдг", feedbackHeading:"5я╕ПтГг рдЕрднрд┐рдкреНрд░рд╛рдп", feedbackBtn:"рдЕрднрд┐рдкреНрд░рд╛рдп рдкрд╛рдард╡рд╛",
        notif:["ЁЯУ▒ рдореЛрдмрд╛рдИрд▓ рд╕реВрдЪрдирд╛ рдкрд╛рдард╡рд▓реА!", "ЁЯФК рдЖрд╡рд╛рдЬ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рддрдпрд╛рд░!", "ЁЯУи рдПрд╕рдПрдордПрд╕/рдпреВрдПрд╕рдПрд╕рдбреА рдкрд╛рдард╡рд▓реЗ!"],
        fillAlert:"рдХреГрдкрдпрд╛ рд╕рд░реНрд╡ рдорд╛рд╣рд┐рддреА рднрд░рд╛", selectCrop:"рдкреАрдХ рдирд┐рд╡рдбрд╛", selectSoil:"рдорд╛рддреА рдирд┐рд╡рдбрд╛",
        farmPlaceholder:"рд╢реЗрддрд╛рдЪрд╛ рдЖрдХрд╛рд░ рдЯрд╛рдХрд╛", locPlaceholder:"рдард┐рдХрд╛рдг рдЯрд╛рдХрд╛", smsVoice:"рдЖрдкрд▓реА рдкреАрдХ рд╕рд▓реНрд▓рд╛ SMS/USSD рджреНрд╡рд╛рд░реЗ рдкрд╛рдард╡рдгреНрдпрд╛рдд рдЖрд▓реА рдЖрд╣реЗ.",
        photoUpload:"рдорд╛рддреАрдЪрд╛ рдлреЛрдЯреЛ рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рдЕрдкрд▓реЛрдб рдЭрд╛рд▓рд╛.", enterLoc:"рд╕реЗрдиреНрд╕рд░ рдбреЗрдЯрд╛ рдкрд╛рд╣рдгреНрдпрд╛рд╕рд╛рдареА рдард┐рдХрд╛рдг рдЯрд╛рдХрд╛"}
};

// ---------------- CROPS & SOIL ----------------
const cropOptions = {
  en:{wheat:"Wheat",rice:"Rice",cotton:"Cotton",tomato:"Tomato",sugarcane:"Sugarcane"},
  hi:{wheat:"рдЧреЗрд╣реВрдВ",rice:"рдзрд╛рди",cotton:"рдХрдкрд╛рд╕",tomato:"рдЯрдорд╛рдЯрд░",sugarcane:"рдЧрдиреНрдирд╛"},
  mr:{wheat:"рдЧрд╣реВ",rice:"рддрд╛рдВрджреВрд│",cotton:"рдХрд╛рдкреВрд╕",tomato:"рдЯреЛрдореЕрдЯреЛ",sugarcane:"рдКрд╕"}
};
const soilOptions = {
  en:{clay:"Clay",sandy:"Sandy",loamy:"Loamy",silt:"Silt"},
  hi:{clay:"рдорд┐рдЯреНрдЯреА (рдХреНрд▓реЗ)",sandy:"рд░реЗрддреАрд▓реА рдорд┐рдЯреНрдЯреА",loamy:"рджреЛрдордЯ рдорд┐рдЯреНрдЯреА",silt:"рд╕рд┐рд▓реНрдЯ рдорд┐рдЯреНрдЯреА"},
  mr:{clay:"рдорд╛рддреА (рдХреНрд▓реЗ)",sandy:"рд╡рд╛рд│реВ рдорд╛рддреА",loamy:"рд▓реЛрдордЯ рдорд╛рддреА",silt:"рд╕рд┐рд▓реНрдЯ рдорд╛рддреА"}
};

// ---------------- SENSOR ----------------
let sensorData={soilMoisture:65,temperature:28,humidity:72};
let sensorInterval = null;

function handleLocationInput() {
    const location = document.getElementById('location').value.trim();
    const lang = document.getElementById("language").value;
    const t = translations[lang];
    const sensorDiv = document.getElementById('sensorData');

    if(location === "") {
        sensorDiv.innerHTML = `<div class="card" style="color:#888;">${t.enterLoc}</div>`;
        if(sensorInterval) {
            clearInterval(sensorInterval);
            sensorInterval = null;
        }
        return;
    }

    if(!sensorInterval) {
        sensorInterval = setInterval(() => {
            sensorData.soilMoisture = Math.max(30, Math.min(90, sensorData.soilMoisture + (Math.random() - 0.5) * 5));
            sensorData.temperature = Math.max(20, Math.min(40, sensorData.temperature + (Math.random() - 0.5) * 2));
            sensorData.humidity = Math.max(40, Math.min(95, sensorData.humidity + (Math.random() - 0.5) * 3));
            displaySensorData();
        }, 5000);
    }
    displaySensorData();
}

function displaySensorData(){
    const location = document.getElementById('location').value.trim();
    const lang = document.getElementById("language").value;
    const t = translations[lang];
    const sensorDiv = document.getElementById('sensorData');

    if(location === "") {
        sensorDiv.innerHTML = `<div class="card" style="color:#888;">${t.enterLoc}</div>`;
        return;
    }

    sensorDiv.innerHTML = `
        <div class="card">ЁЯТз ${lang==='hi'?'рдорд┐рдЯреНрдЯреА рдореЗрдВ рдирдореА':lang==='mr'?'рдорд╛рддреАрддреАрд▓ рдУрд▓рд╕рд░рдкрдгрд╛':'Soil Moisture'}: ${Math.round(sensorData.soilMoisture)}%</div>
        <div class="card">ЁЯМб ${lang==='hi'?'рддрд╛рдкрдорд╛рди':lang==='mr'?'рддрд╛рдкрдорд╛рди':'Temperature'}: ${Math.round(sensorData.temperature)}┬░C</div>
        <div class="card">ЁЯМл ${lang==='hi'?'рдЖрд░реНрджреНрд░рддрд╛':lang==='mr'?'рд╣рдореА':'Humidity'}: ${Math.round(sensorData.humidity)}%</div>
    `;
}

// ---------------- UPDATE UI ----------------
function updateSelectOptions(){
  const lang=document.getElementById("language").value;
  const t=translations[lang];

  let cropSelect=document.getElementById("cropType");
  cropSelect.innerHTML=`<option value="">${t.selectCrop}</option>`;
  for(let key in cropOptions[lang]) cropSelect.innerHTML+=`<option value="${key}">${cropOptions[lang][key]}</option>`;

  let soilSelect=document.getElementById("soilType");
  soilSelect.innerHTML=`<option value="">${t.selectSoil}</option>`;
  for(let key in soilOptions[lang]) soilSelect.innerHTML+=`<option value="${key}">${soilOptions[lang][key]}</option>`;

  document.getElementById("farmSize").placeholder = t.farmPlaceholder;
  document.getElementById("location").placeholder = t.locPlaceholder;
  document.getElementById("soilPhotoLabel").innerText = t.soilPhotoLabel;
}

function updateLanguage(){
  const lang=document.getElementById("language").value;
  const t=translations[lang];

  document.getElementById("title").innerText=t.title;
  document.getElementById("langLabel").innerText=t.langLabel;
  document.getElementById("inputHeading").innerText=t.inputHeading;
  document.getElementById("cropLabel").innerText=t.cropLabel;
  document.getElementById("sizeLabel").innerText=t.sizeLabel;
  document.getElementById("soilLabel").innerText=t.soilLabel;
  document.getElementById("locLabel").innerText=t.locLabel;
  document.getElementById("adviceBtn").innerText=t.adviceBtn;
  document.getElementById("sensorHeading").innerText=t.sensorHeading;
  document.getElementById("recHeading").innerText=t.recHeading;
  document.getElementById("voiceBtn").innerText=t.voiceBtn;
  document.getElementById("notifHeading").innerText=t.notifHeading;
  document.getElementById("feedbackHeading").innerText=t.feedbackHeading;
  document.getElementById("feedbackBtn").innerText=t.feedbackBtn;

  updateSelectOptions();
  handleLocationInput(); // update sensor section
}

// ---------------- SOIL PHOTO ----------------
function previewSoilPhoto() {
    const fileInput = document.getElementById('soilPhoto');
    const preview = document.getElementById('soilPreview');
    const lang = document.getElementById("language").value;
    const t = translations[lang];

    if(fileInput.files && fileInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.innerHTML = `<img src="${e.target.result}" alt="Soil Photo">`;
            speakText(t.photoUpload);
        };
        reader.readAsDataURL(fileInput.files[0]);
    } else {
        preview.innerHTML = '';
    }
}

// ---------------- AI ADVICE ----------------
let lastAdvice="";
function generateRecommendations(){
  const crop=document.getElementById('cropType').value;
  const farmSize=document.getElementById('farmSize').value;
  const soil=document.getElementById('soilType').value;
  const location=document.getElementById('location').value;
  const lang=document.getElementById('language').value;
  const t=translations[lang];

  if(!crop||!farmSize||!soil||!location){ alert(t.fillAlert); return; }

  const rec = {
    wheat:{en:"Plant wheat. Irrigate every 7-10 days. Use NPK 120:60:40.",hi:"рдЧреЗрд╣реВрдВ рдмреЛрдПрдВред рд╣рд░ 7-10 рджрд┐рди рдореЗрдВ рд╕рд┐рдВрдЪрд╛рдИ рдХрд░реЗрдВред рдПрдирдкреАрдХреЗ 120:60:40 рдбрд╛рд▓реЗрдВред",mr:"рдЧрд╣реВ рдкреЗрд░рд╛. рджрд░ 7-10 рджрд┐рд╡рд╕рд╛рдВрдиреА рдкрд╛рдгреА рджреНрдпрд╛. NPK 120:60:40 рдЯрд╛рдХрд╛."},
    rice:{en:"Transplant rice. Keep 2-3 cm water. Apply urea in 3 splits.",hi:"рдзрд╛рди рдХреА рд░реЛрдкрд╛рдИ рдХрд░реЗрдВред 2-3 рд╕реЗрдореА рдкрд╛рдиреА рд░рдЦреЗрдВред рдпреВрд░рд┐рдпрд╛ 3 рдмрд╛рд░ рдбрд╛рд▓реЗрдВред",mr:"рддрд╛рдВрджрд│рд╛рдЪреА рд░реЛрдкрд╡рд╛рдЯрд┐рдХрд╛ рд▓рд╛рд╡рд╛. 2-3 рд╕реЗрдореА рдкрд╛рдгреА рдареЗрд╡рд╛. рдпреБрд░рд┐рдпрд╛ 3 рдЯрдкреНрдкреНрдпрд╛рдд рджреНрдпрд╛."},
    cotton:{en:"Plant cotton. Spacing 45x15 cm. Use Bt variety.",hi:"рдХрдкрд╛рд╕ рдмреЛрдПрдВред рджреВрд░реА 45x15 рд╕реЗрдореАред Bt рдХрд┐рд╕реНрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред",mr:"рдХрд╛рдкреВрд╕ рдкреЗрд░рд╛. рдЕрдВрддрд░ 45x15 рд╕реЗрдореА. Bt рд╡реЗрд░рд╛рдпрдЯреА рд╡рд╛рдкрд░рд╛."},
    tomato:{en:"Plant tomato. Mulch to conserve moisture. Stake plants.",hi:"рдЯрдорд╛рдЯрд░ рд▓рдЧрд╛рдПрдВред рдирдореА рдмрдирд╛рдП рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдорд▓реНрдЪ рдХрд░реЗрдВред рдкреМрдзреЛрдВ рдХреЛ рд╕рд╣рд╛рд░рд╛ рджреЗрдВред",mr:"рдЯреЛрдореЕрдЯреЛ рдкреЗрд░рд╛. рдУрд▓рд╛рд╡рд╛ рд░рд╛рдЦрдгреНрдпрд╛рд╕рд╛рдареА рдорд▓реНрдЪ рдХрд░рд╛. рдЭрд╛рдбрд╛рдВрдирд╛ рдЖрдзрд╛рд░ рджреНрдпрд╛."},
    sugarcane:{en:"Plant sugarcane. Row spacing 90-120 cm. Apply 280:92:92 NPK.",hi:"рдЧрдиреНрдирд╛ рд▓рдЧрд╛рдПрдВред рдкрдВрдХреНрддрд┐ рдЕрдВрддрд░ 90-120 рд╕реЗрдореАред 280:92:92 NPK рдбрд╛рд▓реЗрдВред",mr:"рдКрд╕ рдкреЗрд░рд╛. рд░реЛ spacing 90-120 рд╕реЗрдореА. 280:92:92 NPK рдЯрд╛рдХрд╛."}
  };

  lastAdvice=rec[crop][lang];
  document.getElementById('recommendations').innerHTML=`<div class="card">${lastAdvice}</div>`;
  document.getElementById('notifications').innerHTML=`<div class="card">${t.notif[0]}</div><div class="card">${t.notif[1]}</div><div class="card">${t.notif[2]}</div>`;
  speakText(t.smsVoice);
}

// ---------------- VOICE ----------------
function speakText(text){
  const lang=document.getElementById("language").value;
  let msg=new SpeechSynthesisUtterance(text);
  msg.lang=lang==='hi'?'hi-IN':lang==='mr'?'mr-IN':'en-IN';
  window.speechSynthesis.speak(msg);
}

function speakAll(){
  const lang=document.getElementById("language").value;
  const t=translations[lang];
  const crop=cropOptions[lang][document.getElementById('cropType').value]||'';
  const farmSize=document.getElementById('farmSize').value;
  const soil=soilOptions[lang][document.getElementById('soilType').value]||'';
  const location=document.getElementById('location').value;
  if(!crop||!farmSize||!soil||!location){ alert(t.fillAlert); return; }
  const text=`${t.inputHeading}: ${t.cropLabel} ${crop}, ${t.sizeLabel} ${farmSize}, ${t.soilLabel} ${soil}, ${t.locLabel} ${location}. ${lastAdvice}. ${t.smsVoice}`;
  speakText(text);
}

// ---------------- FEEDBACK ----------------
function collectFeedback(){
  const lang=document.getElementById("language").value;
  const msg=lang==="hi"?"рдХреГрдкрдпрд╛ рдЕрдкрдиреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдВ:":lang==="mr"?"рдХреГрдкрдпрд╛ рдЖрдкрд▓рд╛ рдЕрднрд┐рдкреНрд░рд╛рдп рджреНрдпрд╛:":"Please provide feedback:";
  const feedback=prompt(msg);
  if(feedback) alert("тЬЕ Thank you / рдзрдиреНрдпрд╡рд╛рдж / рдзрдиреНрдпрд╡рд╛рдж!");
}

// ---------------- INIT ----------------
updateLanguage();
</script>

</body>
</html>

